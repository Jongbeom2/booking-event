(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),i=(a(94),a(10)),l=a(23),u=a(13);a(95);var s=function(){return r.a.createElement("div",null,"Home Page")},m=a(9),d=a.n(m),g=a(15),p=a(173),v=a(157),f=a(77),h=a(154),b=a(159),E=a(16),k=a.n(E),O=Object(n.createContext)({signIn:function(){},signOut:function(){}}),x=Object(n.createContext)({isLoading:!1,setIsLoading:function(){}}),j=Object(h.a)((function(e){return{title:{marginTop:e.spacing(10)},signInbutton:{marginTop:e.spacing(5)},signUpbutton:{marginTop:e.spacing(2)}}}));var w=function(){var e=j(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(""),s=Object(i.a)(u,2),m=s[0],h=s[1],E=Object(n.useContext)(O).signIn,w=Object(n.useContext)(x).setIsLoading,C=function(){var e=Object(g.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={query:'\n        query{\n          login(email: "'.concat(c,'", password: "').concat(m,'"){\n            userId\n            token\n            tokenExpiration\n          }\n        }\n      ')},e.prev=1,w(!0),e.next=5,k()({url:"/graphql",method:"POST",data:t});case 5:if((a=e.sent).data.data){e.next=8;break}throw new Error("Sign in Failed");case 8:E(a.data.data.login.token),alert("Sign in Succeed"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),alert("Sign in Failed"),console.log(e.t0);case 16:return e.prev=16,w(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(v.a,{maxWidth:"xs"},r.a.createElement(f.a,{className:e.title,variant:"h4",align:"center",paragraph:"true"},"Sign in"),r.a.createElement(p.a,{label:"Email",fullWidth:"true",margin:"normal",onChange:function(e){o(e.target.value)}}),r.a.createElement(p.a,{type:"password",label:"Password",fullWidth:"true",margin:"normal",onChange:function(e){h(e.target.value)}}),r.a.createElement(b.a,{className:e.signInbutton,variant:"contained",color:"primary",fullWidth:"true",size:"large",onClick:C},"Sign in"),r.a.createElement(b.a,{component:l.b,to:"/signup",className:e.signUpbutton,variant:"outlined",fullWidth:"true",size:"large"},"Don't have an account? Sign Up")))},C=Object(h.a)((function(e){return{title:{marginTop:e.spacing(10)},signInbutton:{marginTop:e.spacing(5)},signUpbutton:{marginTop:e.spacing(2)}}}));var S=function(){var e=C(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(""),s=Object(i.a)(u,2),m=s[0],h=s[1],E=Object(n.useState)(""),O=Object(i.a)(E,2),j=O[0],w=O[1],S=Object(n.useContext)(x).setIsLoading,y=function(){var e=Object(g.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={query:'\n        mutation {\n          createUser(userInput: {\n            email: "'.concat(c,'"\n            password: "').concat(m,'"\n          }){\n            _id\n            email\n          }\n        }\n      ')},e.prev=1,S(!0),m===j&&j&&j){e.next=5;break}throw new Error("Sign up Failed");case 5:return e.next=7,k()({url:"/graphql",method:"POST",data:t});case 7:if(e.sent.data.data){e.next=10;break}throw new Error("Sign up Failed");case 10:alert("Sign up Succeed"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),alert("Sign up Failed"),console.log(e.t0);case 17:return e.prev=17,S(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(v.a,{maxWidth:"xs"},r.a.createElement(f.a,{className:e.title,variant:"h4",align:"center",paragraph:"true"},"Sign in"),r.a.createElement(p.a,{label:"Email",fullWidth:"true",margin:"normal",onChange:function(e){o(e.target.value)}}),r.a.createElement(p.a,{type:"password",label:"Password",fullWidth:"true",margin:"normal",onChange:function(e){h(e.target.value)}}),r.a.createElement(p.a,{type:"password",label:"Password Confirm",fullWidth:"true",margin:"normal",onChange:function(e){w(e.target.value)}}),r.a.createElement(b.a,{className:e.signInbutton,variant:"contained",color:"primary",fullWidth:"true",size:"large",onClick:y},"Sign up"),r.a.createElement(b.a,{component:l.b,to:"/signin",className:e.signUpbutton,variant:"outlined",fullWidth:"true",size:"large"},"Already have an account? Sign in")))},y=a(160),I=a(162),B=a(161),q=Object(h.a)((function(e){return{card:{marginBottom:e.spacing(2)}}}));var N=function(e){var t=Object(n.useContext)(O).signOut,a=Object(n.useContext)(x).setIsLoading,c=q(),o=e.id,i=e.createdAt,l=e.event,u=e.getBookings,s=l.title,m=l.date,p=function(){var e=Object(g.a)(d.a.mark((function e(){var n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={query:'\n        mutation{\n          cancelBooking(bookingId:"'.concat(o,'"){\n            _id\n            title\n          }\n        }\n      ')},e.prev=1,a(!0),e.next=5,k()({url:"/graphql",method:"POST",data:n,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:if(c=e.sent,!(null===(r=c.data)||void 0===r?void 0:r.errors)){e.next=10;break}if("Unauthenticatd!"!==c.data.errors[0].message){e.next=10;break}throw t(),new Error("Unauthenticatd");case 10:if(c.data.data){e.next=12;break}throw new Error("Cancel Booking Failed");case 12:u(),alert("Cancel Booking Succeed"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),alert(e.t0),console.log(e.t0);case 20:return e.prev=20,a(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,16,20,23]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(y.a,{className:c.card,variant:"outlined"},r.a.createElement(B.a,null,r.a.createElement(f.a,{variant:"h4",color:"primary",gutterBottom:!0},s),r.a.createElement(f.a,{variant:"body2",gutterBottom:!0},"Event Date : ",m),r.a.createElement(f.a,{variant:"body2"},"Booking Date : ",i)),r.a.createElement(I.a,null,r.a.createElement(b.a,{color:"primary",size:"small",onClick:p},"Cancel"))))},P=Object(h.a)((function(e){return{root:{marginTop:e.spacing(5)}}}));var T=function(){var e=Object(n.useContext)(O).signOut,t=Object(n.useContext)(x).setIsLoading,a=P(),c=Object(n.useState)([]),o=Object(i.a)(c,2),l=o[0],u=o[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){var a=Object(g.a)(d.a.mark((function a(){var n,r,c;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={query:"\n        query{\n          getBookings{\n            _id\n            createdAt\n            event{\n              title\n              date\n            }\n          }\n        }\n      "},a.prev=1,t(!0),a.next=5,k()({url:"/graphql",method:"POST",data:n,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:if(c=a.sent,!(null===(r=c.data)||void 0===r?void 0:r.errors)){a.next=10;break}if("Unauthenticatd!"!==c.data.errors[0].message){a.next=10;break}throw e(),new Error("Unauthenticatd");case 10:if(c.data.data){a.next=12;break}throw new Error("Get bookings Failed");case 12:u(c.data.data.getBookings),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(1),alert(a.t0),console.log(a.t0);case 19:return a.prev=19,t(!1),a.finish(19);case 22:case"end":return a.stop()}}),a,null,[[1,15,19,22]])})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(v.a,{maxWidth:"lg",className:a.root},null===l||void 0===l?void 0:l.map((function(e){return r.a.createElement(N,{getBookings:s,id:e._id,createdAt:e.createdAt,event:e.event})})))},W=a(167),U=a(168),F=a(73),L=a.n(F),z=a(175),_=a(166),A=a(164),G=a(165),D=a(163);var J=function(e){var t=Object(n.useContext)(O).signOut,a=e.open,c=e.handleClose,o=e.getEvents,l=Object(n.useContext)(x).setIsLoading,u=Object(n.useState)(""),s=Object(i.a)(u,2),m=s[0],v=s[1],f=Object(n.useState)(""),h=Object(i.a)(f,2),E=h[0],j=h[1],w=Object(n.useState)(""),C=Object(i.a)(w,2),S=C[0],y=C[1],I=Object(n.useState)(""),B=Object(i.a)(I,2),q=B[0],N=B[1],P=function(){var e=Object(g.a)(d.a.mark((function e(){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={query:'\n        mutation{\n          createEvent(eventInput:{\n            title: "'.concat(m,'"\n            description: "').concat(q,'"\n            price: ').concat(+E,'\n            date: "').concat(S,'"\n          }){\n            _id\n            title\n            description\n            price\n            date\n          }\n        }\n      ')},e.prev=1,c(),l(!0),m&&E&&S&&q){e.next=6;break}throw new Error("Create event Failed");case 6:return e.next=8,k()({url:"/graphql",method:"POST",data:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 8:if(r=e.sent,!(null===(n=r.data)||void 0===n?void 0:n.errors)){e.next=13;break}if("Unauthenticatd!"!==r.data.errors[0].message){e.next=13;break}throw t(),new Error("Unauthenticatd");case 13:if(r.data.data){e.next=15;break}throw new Error("Create event Failed");case 15:alert("Create event Succeed"),o(),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),alert(e.t0),console.log(e.t0);case 23:return e.prev=23,l(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[1,19,23,26]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(z.a,{open:a,onClose:c},r.a.createElement(D.a,null,"Create Event"),r.a.createElement(A.a,null,r.a.createElement(G.a,null,"Please enter information about event you want to create!"),r.a.createElement(p.a,{autoFocus:!0,margin:"dense",label:"Title",fullWidth:!0,onChange:function(e){v(e.target.value)}}),r.a.createElement(p.a,{margin:"dense",label:"Price",fullWidth:!0,onChange:function(e){j(e.target.value)}}),r.a.createElement(p.a,{margin:"dense",label:"Date",fullWidth:!0,onChange:function(e){y(e.target.value)}}),r.a.createElement(p.a,{margin:"dense",label:"Description",fullWidth:!0,onChange:function(e){N(e.target.value)}})),r.a.createElement(_.a,null,r.a.createElement(b.a,{onClick:c,color:"primary"},"Cancel"),r.a.createElement(b.a,{onClick:P,color:"primary"},"Create"))))};var R=function(e){var t,a=e.open,c=e.handleClose,o=e.creator,l=Object(n.useState)(""),u=Object(i.a)(l,2),s=u[0],m=u[1];Object(n.useEffect)((function(){p()}),[]);var p=function(){var e=Object(g.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={query:'\n        query{\n          getUser(email:"'.concat(o.email,'"){\n            _id\n            email\n            createdEvents{\n              title\n            }\n            password\n          }\n        }\n      ')},e.prev=1,e.next=4,k()({url:"/graphql",method:"POST",data:t});case 4:if((a=e.sent).data.data){e.next=7;break}throw new Error("Get user failed");case 7:m(a.data.data.getUser),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Get user failed"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(z.a,{open:a,onClose:c},r.a.createElement(D.a,null,"Creator Information"),r.a.createElement(A.a,null,r.a.createElement(f.a,{gutterBottom:!0},"Email : ",s.email),r.a.createElement(f.a,null,"Ceated Events : ",null===(t=s.createdEvents)||void 0===t?void 0:t.reduce((function(e,t){return e+t.title+", "}),""))),r.a.createElement(_.a,null,r.a.createElement(b.a,{onClick:c,color:"primary"},"Close"))))},H=Object(h.a)((function(e){return{card:{marginBottom:e.spacing(2)}}}));var Y=function(e){var t=Object(n.useContext)(O).signOut,a=Object(n.useContext)(x).setIsLoading,c=H(),o=e.id,l=e.title,u=e.price,s=e.description,m=e.date,p=e.creator,v=Object(n.useState)(!1),h=Object(i.a)(v,2),E=h[0],j=h[1],w=function(){var e=Object(g.a)(d.a.mark((function e(){var n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={query:'\n        mutation{\n          bookEvent(eventId:"'.concat(o,'"){\n            _id\n          }\n        }\n      ')},e.prev=1,a(!0),e.next=5,k()({url:"/graphql",method:"POST",data:n,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:if(c=e.sent,!(null===(r=c.data)||void 0===r?void 0:r.errors)){e.next=10;break}if("Unauthenticatd!"!==c.data.errors[0].message){e.next=10;break}throw t(),new Error("Unauthenticatd");case 10:if(c.data.data){e.next=12;break}throw new Error("Booking Failed");case 12:alert("Booking Succeed"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),alert(e.t0),console.log(e.t0);case 19:return e.prev=19,a(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(y.a,{className:c.card,variant:"outlined"},r.a.createElement(B.a,null,r.a.createElement(f.a,{variant:"h4",color:"primary",gutterBottom:!0},l),r.a.createElement(f.a,{variant:"h6"},"Created By : ",p.email),r.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"Price : ",u),r.a.createElement(f.a,{variant:"body2",gutterBottom:!0},"Date : ",m),r.a.createElement(f.a,{variant:"body2"},s)),r.a.createElement(I.a,null,r.a.createElement(b.a,{color:"primary",size:"small",onClick:w},"Book"),r.a.createElement(b.a,{color:"primary",size:"small",onClick:function(){j(!0)}},"Creator Info"))),r.a.createElement(R,{handleClose:function(){j(!1)},open:E,creator:p}))},K=Object(h.a)((function(e){return{createCard:{marginTop:e.spacing(5),marginBottom:e.spacing(3)},media:{height:"10rem"}}}));var M=function(){var e=K(),t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),u=Object(i.a)(l,2),s=u[0],m=u[1],p=Object(n.useContext)(x).setIsLoading;Object(n.useEffect)((function(){h()}),[]);var h=function(){var e=Object(g.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={query:"\n        query{\n          getEvents{\n            _id\n            title\n            description\n            price\n            date\n            creator{\n              _id\n              email\n            }\n          }\n        }\n      "},e.prev=1,p(!0),e.next=5,k()({url:"/graphql",method:"POST",data:t});case 5:if((a=e.sent).data.data){e.next=8;break}throw new Error("Get events Failed");case 8:m(a.data.data.getEvents),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),alert("Get events Failed"),console.log(e.t0);case 15:return e.prev=15,p(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(v.a,{maxWidth:"lg"},r.a.createElement(y.a,{className:e.createCard},r.a.createElement(W.a,{onClick:function(){o(!0)}},r.a.createElement(U.a,{className:e.media,image:L.a,title:"Contemplative Reptile"}),r.a.createElement(B.a,null,r.a.createElement(f.a,{className:e.title,variant:"h6",color:"primary",gutterBottom:!0},"Create event whatever you want!")))),s.map((function(e){return r.a.createElement(Y,{id:e._id,title:e.title,description:e.description,price:e.price,date:e.date,creator:e.creator})}))),r.a.createElement(J,{handleClose:function(){o(!1)},open:c,getEvents:h}))},Q=a(170),V=a(171),X=a(172),Z=a(74),$=a.n(Z),ee=a(169),te=Object(h.a)((function(e){return{root:{position:"absolute",top:"0",left:"0",width:"-webkit-fill-available",height:"-webkit-fill-available",background:"black",opacity:"0.5"},icon:{position:"absolute",top:"50%",left:"50%"}}}));var ae=function(){var e=Object(n.useContext)(x).isLoading,t=te();return r.a.createElement("div",null,e?r.a.createElement("div",{className:t.root},r.a.createElement(ee.a,{className:t.icon})):null)},ne=a(75);var re=function(e){var t=e.token,a=e.children,n=Object(ne.a)(e,["token","children"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){var n=e.location;return t?a:r.a.createElement(u.a,{to:{pathname:"/signin",state:{from:n}}})}}))},ce=Object(h.a)((function(e){return{root:{background:"#ecf0f1",width:"100%",height:"100%",flexGrow:1},main:{background:"#ffffff",overflowY:"scroll",width:"50%",height:"100%",margin:"0 25% 0 25%",boxSizing:"border-box","@media (max-width:960px)":{width:"100%",margin:"0"}},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var oe=function(){var e=ce(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],m=Object(n.useState)(""),d=Object(i.a)(m,2),g=d[0],p=d[1];Object(n.useEffect)((function(){var e=localStorage.getItem("token");e&&o(e)}),[]);var v=function(){o(null),localStorage.setItem("token","")};return r.a.createElement(l.a,null,r.a.createElement(x.Provider,{value:{isLoading:g,setIsLoading:p}},r.a.createElement(O.Provider,{value:{signIn:function(e){o(e),localStorage.setItem("token",e)},signOut:v}},r.a.createElement(u.d,null,r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.main},r.a.createElement(Q.a,{position:"static"},r.a.createElement(V.a,null,r.a.createElement(X.a,{className:e.menuButton,edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement($.a,null)),r.a.createElement(f.a,{className:e.title,variant:"h6"},"Booking"),r.a.createElement(b.a,{component:l.b,to:"/event",color:"inherit"},"Event"),r.a.createElement(b.a,{component:l.b,to:"/booking",color:"inherit"},"Booking"),c?r.a.createElement(b.a,{onClick:v,color:"inherit"},"Logout"):r.a.createElement(b.a,{component:l.b,to:"/signin",color:"inherit"},"SignIn"))),c&&r.a.createElement(u.a,{from:"/signin",to:"/home",exact:!0}),c&&r.a.createElement(u.a,{from:"/signup",to:"/home",exact:!0}),r.a.createElement(u.b,{exact:!0,path:"/",component:s}),r.a.createElement(u.b,{exact:!0,path:"/home",component:s}),r.a.createElement(u.b,{exact:!0,path:"/signin",component:w}),r.a.createElement(u.b,{exact:!0,path:"/signup",component:S}),r.a.createElement(re,{exact:!0,path:"/event",token:c},r.a.createElement(M,null)),r.a.createElement(re,{exact:!0,path:"/booking",token:c},r.a.createElement(T,null))))),r.a.createElement(ae,null))))};o.a.render(r.a.createElement(oe,null),document.getElementById("root"))},73:function(e,t,a){e.exports=a.p+"static/media/event.8762902f.png"},89:function(e,t,a){e.exports=a(121)},94:function(e,t,a){},95:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.28819a1c.chunk.js.map