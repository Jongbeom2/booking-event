(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),i=(a(94),a(10)),l=a(23),u=a(13);a(95);var s=function(){return r.a.createElement("div",null,"Home Page")},m=a(9),d=a.n(m),p=a(15),g=a(171),v=a(156),f=a(77),h=a(153),b=a(158),E=a(16),k=a.n(E),O=Object(n.createContext)({token:null,userId:null,signIn:function(){},signOut:function(){}}),x=Object(h.a)((function(e){return{title:{marginTop:e.spacing(10)},signInbutton:{marginTop:e.spacing(5)},signUpbutton:{marginTop:e.spacing(2)}}}));var j=function(){var e=x(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(""),s=Object(i.a)(u,2),m=s[0],h=s[1],E=Object(n.useContext)(O).signIn,j=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={query:'\n        query{\n          login(email: "'.concat(c,'", password: "').concat(m,'"){\n            userId\n            token\n            tokenExpiration\n          }\n        }\n      ')},e.prev=1,e.next=4,k()({url:"/graphql",method:"POST",data:t});case 4:if((a=e.sent).data.data){e.next=7;break}throw new Error("Sign in Failed");case 7:E(a.data.data.login.token,a.data.data.login.userId,a.data.data.login.tokenExpiration),alert("Sign in Succeed"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),alert("Sign in Failed"),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(v.a,{maxWidth:"xs"},r.a.createElement(f.a,{className:e.title,variant:"h4",align:"center",paragraph:"true"},"Sign in"),r.a.createElement(g.a,{label:"Email",fullWidth:"true",margin:"normal",onChange:function(e){o(e.target.value)}}),r.a.createElement(g.a,{type:"password",label:"Password",fullWidth:"true",margin:"normal",onChange:function(e){h(e.target.value)}}),r.a.createElement(b.a,{className:e.signInbutton,variant:"contained",color:"primary",fullWidth:"true",size:"large",onClick:j},"Sign in"),r.a.createElement(b.a,{component:l.b,to:"/signup",className:e.signUpbutton,variant:"outlined",fullWidth:"true",size:"large"},"Don't have an account? Sign Up")))},w=Object(h.a)((function(e){return{title:{marginTop:e.spacing(10)},signInbutton:{marginTop:e.spacing(5)},signUpbutton:{marginTop:e.spacing(2)}}}));var C=function(){var e=w(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(""),s=Object(i.a)(u,2),m=s[0],h=s[1],E=Object(n.useState)(""),O=Object(i.a)(E,2),x=O[0],j=O[1],C=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m===x&&x&&x){e.next=3;break}return alert("Sign up Failed"),e.abrupt("return");case 3:return t={query:'\n        mutation {\n          createUser(userInput: {\n            email: "'.concat(c,'"\n            password: "').concat(m,'"\n          }){\n            _id\n            email\n          }\n        }\n      ')},e.prev=4,e.next=7,k()({url:"/graphql",method:"POST",data:t});case 7:if(e.sent.data.data){e.next=10;break}throw new Error("Sign up Failed");case 10:alert("Sign up Succeed"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),alert("Sign up Failed"),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(v.a,{maxWidth:"xs"},r.a.createElement(f.a,{className:e.title,variant:"h4",align:"center",paragraph:"true"},"Sign in"),r.a.createElement(g.a,{label:"Email",fullWidth:"true",margin:"normal",onChange:function(e){o(e.target.value)}}),r.a.createElement(g.a,{type:"password",label:"Password",fullWidth:"true",margin:"normal",onChange:function(e){h(e.target.value)}}),r.a.createElement(g.a,{type:"password",label:"Password Confirm",fullWidth:"true",margin:"normal",onChange:function(e){j(e.target.value)}}),r.a.createElement(b.a,{className:e.signInbutton,variant:"contained",color:"primary",fullWidth:"true",size:"large",onClick:C},"Sign up"),r.a.createElement(b.a,{component:l.b,to:"/signin",className:e.signUpbutton,variant:"outlined",fullWidth:"true",size:"large"},"Already have an account? Sign in")))},S=a(159),y=a(161),B=a(160),q=Object(h.a)((function(e){return{card:{marginBottom:e.spacing(2)}}}));var I=function(e){var t=Object(n.useContext)(O).token,a=q(),c=e.id,o=e.createdAt,i=e.event,l=e.getBookings,u=i.title,s=i.date,m=function(){var e=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={query:'\n        mutation{\n          cancelBooking(bookingId:"'.concat(c,'"){\n            _id\n            title\n          }\n        }\n      ')},e.prev=1,e.next=4,k()({url:"/graphql",method:"POST",data:a,headers:{Authorization:"Bearer ".concat(t)}});case 4:if(e.sent.data.data){e.next=7;break}throw new Error("Cancel Booking Failed");case 7:l(),alert("Cancel Booking Succeed"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),alert("Cancel Booking Failed"),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(S.a,{className:a.card,variant:"outlined"},r.a.createElement(B.a,null,r.a.createElement(f.a,{variant:"h4",color:"primary",gutterBottom:!0},u),r.a.createElement(f.a,{variant:"body2",gutterBottom:!0},"Event Date : ",s),r.a.createElement(f.a,{variant:"body2"},"Booking Date : ",o)),r.a.createElement(y.a,null,r.a.createElement(b.a,{color:"primary",size:"small",onClick:m},"Cancel"))))},T=Object(h.a)((function(e){return{root:{marginTop:e.spacing(5)}}}));var W=function(){var e=Object(n.useContext)(O).token,t=T(),a=Object(n.useState)([]),c=Object(i.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){u()}),[]);var u=function(){var t=Object(p.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={query:"\n        query{\n          getBookings{\n            _id\n            createdAt\n            event{\n              title\n              date\n            }\n          }\n        }\n      "},t.prev=1,t.next=4,k()({url:"/graphql",method:"POST",data:a,headers:{Authorization:"Bearer ".concat(e)}});case 4:if((n=t.sent).data.data){t.next=7;break}throw new Error("Get bookings Failed");case 7:l(n.data.data.getBookings),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),alert("Get bookings Failed"),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(v.a,{maxWidth:"lg",className:t.root},null===o||void 0===o?void 0:o.map((function(e){return r.a.createElement(I,{getBookings:u,id:e._id,createdAt:e.createdAt,event:e.event})})))},F=a(166),N=a(167),P=a(73),z=a.n(P),_=a(173),A=a(165),G=a(163),U=a(164),D=a(162);var J=function(e){var t=Object(n.useContext)(O).token,a=e.open,c=e.handleClose,o=e.getEvents,l=Object(n.useState)(""),u=Object(i.a)(l,2),s=u[0],m=u[1],v=Object(n.useState)(""),f=Object(i.a)(v,2),h=f[0],E=f[1],x=Object(n.useState)(""),j=Object(i.a)(x,2),w=j[0],C=j[1],S=Object(n.useState)(""),y=Object(i.a)(S,2),B=y[0],q=y[1],I=function(){var e=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&h&&w&&B){e.next=3;break}return alert("Create event failed"),e.abrupt("return");case 3:return a={query:'\n        mutation{\n          createEvent(eventInput:{\n            title: "'.concat(s,'"\n            description: "').concat(B,'"\n            price: ').concat(+h,'\n            date: "').concat(w,'"\n          }){\n            _id\n            title\n            description\n            price\n            date\n          }\n        }\n      ')},e.prev=4,e.next=7,k()({url:"/graphql",method:"POST",data:a,headers:{Authorization:"Bearer ".concat(t)}});case 7:if(e.sent.data.data){e.next=10;break}throw new Error("Create event Failed");case 10:alert("Create event Succeed"),o(),c(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),alert("Create event Failed"),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(_.a,{open:a,onClose:c},r.a.createElement(D.a,null,"Create Event"),r.a.createElement(G.a,null,r.a.createElement(U.a,null,"Please enter information about event you want to create!"),r.a.createElement(g.a,{autoFocus:!0,margin:"dense",label:"Title",fullWidth:!0,onChange:function(e){m(e.target.value)}}),r.a.createElement(g.a,{margin:"dense",label:"Price",fullWidth:!0,onChange:function(e){E(e.target.value)}}),r.a.createElement(g.a,{margin:"dense",label:"Date",fullWidth:!0,onChange:function(e){C(e.target.value)}}),r.a.createElement(g.a,{margin:"dense",label:"Description",fullWidth:!0,onChange:function(e){q(e.target.value)}})),r.a.createElement(A.a,null,r.a.createElement(b.a,{onClick:c,color:"primary"},"Cancel"),r.a.createElement(b.a,{onClick:I,color:"primary"},"Create"))))};var R=function(e){var t,a=e.open,c=e.handleClose,o=e.creator,l=Object(n.useState)(""),u=Object(i.a)(l,2),s=u[0],m=u[1];Object(n.useEffect)((function(){g()}),[]);var g=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={query:'\n        query{\n          getUser(email:"'.concat(o.email,'"){\n            _id\n            email\n            createdEvents{\n              title\n            }\n            password\n          }\n        }\n      ')},e.prev=1,e.next=4,k()({url:"/graphql",method:"POST",data:t});case 4:if((a=e.sent).data.data){e.next=7;break}throw new Error("Get user failed");case 7:m(a.data.data.getUser),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Get user failed"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(_.a,{open:a,onClose:c},r.a.createElement(D.a,null,"Creator Information"),r.a.createElement(G.a,null,r.a.createElement(f.a,{gutterBottom:!0},"Email : ",s.email),r.a.createElement(f.a,null,"Ceated Events : ",null===(t=s.createdEvents)||void 0===t?void 0:t.reduce((function(e,t){return e+t.title+", "}),""))),r.a.createElement(A.a,null,r.a.createElement(b.a,{onClick:c,color:"primary"},"Close"))))},H=Object(h.a)((function(e){return{card:{marginBottom:e.spacing(2)}}}));var L=function(e){var t=Object(n.useContext)(O).token,a=H(),c=e.id,o=e.title,l=e.price,u=e.description,s=e.date,m=e.creator,g=Object(n.useState)(!1),v=Object(i.a)(g,2),h=v[0],E=v[1],x=function(){var e=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={query:'\n        mutation{\n          bookEvent(eventId:"'.concat(c,'"){\n            _id\n          }\n        }\n      ')},e.prev=1,e.next=4,k()({url:"/graphql",method:"POST",data:a,headers:{Authorization:"Bearer ".concat(t)}});case 4:if(e.sent.data.data){e.next=7;break}throw new Error("Booking Failed");case 7:alert("Booking Succeed"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Booking Failed"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(S.a,{className:a.card,variant:"outlined"},r.a.createElement(B.a,null,r.a.createElement(f.a,{variant:"h4",color:"primary",gutterBottom:!0},o),r.a.createElement(f.a,{variant:"h6"},"Created By : ",m.email),r.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"Price : ",l),r.a.createElement(f.a,{variant:"body2",gutterBottom:!0},"Date : ",s),r.a.createElement(f.a,{variant:"body2"},u)),r.a.createElement(y.a,null,r.a.createElement(b.a,{color:"primary",size:"small",onClick:x},"Book"),r.a.createElement(b.a,{color:"primary",size:"small",onClick:function(){E(!0)}},"Creator Info"))),r.a.createElement(R,{handleClose:function(){E(!1)},open:h,creator:m}))},Y=Object(h.a)((function(e){return{createCard:{marginTop:e.spacing(5),marginBottom:e.spacing(3)},media:{height:"10rem"}}}));var K=function(){var e=Y(),t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),u=Object(i.a)(l,2),s=u[0],m=u[1];Object(n.useEffect)((function(){g()}),[]);var g=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={query:"\n        query{\n          getEvents{\n            _id\n            title\n            description\n            price\n            date\n            creator{\n              _id\n              email\n            }\n          }\n        }\n      "},e.prev=1,e.next=4,k()({url:"/graphql",method:"POST",data:t});case 4:if((a=e.sent).data.data){e.next=7;break}throw new Error("Get events Failed");case 7:m(a.data.data.getEvents),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Get events Failed"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(v.a,{maxWidth:"lg"},r.a.createElement(S.a,{className:e.createCard},r.a.createElement(F.a,{onClick:function(){o(!0)}},r.a.createElement(N.a,{className:e.media,image:z.a,title:"Contemplative Reptile"}),r.a.createElement(B.a,null,r.a.createElement(f.a,{className:e.title,variant:"h6",color:"primary",gutterBottom:!0},"Create event whatever you want!")))),s.map((function(e){return r.a.createElement(L,{id:e._id,title:e.title,description:e.description,price:e.price,date:e.date,creator:e.creator})}))),r.a.createElement(J,{handleClose:function(){o(!1)},open:c,getEvents:g}))},M=a(168),Q=a(169),V=a(170),X=a(74),Z=a.n(X),$=a(75);var ee=function(e){var t=e.token,a=e.children,n=Object($.a)(e,["token","children"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){var n=e.location;return t?a:r.a.createElement(u.a,{to:{pathname:"/signin",state:{from:n}}})}}))},te=Object(h.a)((function(e){return{root:{background:"#ecf0f1",width:"100%",height:"100%",flexGrow:1},main:{background:"#ffffff",overflowY:"scroll",width:"50%",height:"100%",margin:"0 25% 0 25%",boxSizing:"border-box","@media (max-width:960px)":{width:"100%",margin:"0"}},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var ae=function(){var e=te(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],m=Object(n.useState)(""),d=Object(i.a)(m,2),p=d[0],g=d[1],v=function(){o(null),g(null)};return r.a.createElement(l.a,null,r.a.createElement(O.Provider,{value:{token:c,userId:p,signIn:function(e,t,a){o(e),g(t)},signOut:v}},r.a.createElement(u.d,null,r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.main},r.a.createElement(M.a,{position:"static"},r.a.createElement(Q.a,null,r.a.createElement(V.a,{className:e.menuButton,edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(Z.a,null)),r.a.createElement(f.a,{className:e.title,variant:"h6"},"Booking"),r.a.createElement(b.a,{component:l.b,to:"/event",color:"inherit"},"Event"),r.a.createElement(b.a,{component:l.b,to:"/booking",color:"inherit"},"Booking"),c?r.a.createElement(b.a,{component:l.b,to:"/signin",onClick:v,color:"inherit"},"Logout"):r.a.createElement(b.a,{component:l.b,to:"/signin",color:"inherit"},"SignIn"))),c&&r.a.createElement(u.a,{from:"/signin",to:"/home",exact:!0}),c&&r.a.createElement(u.a,{from:"/signup",to:"/home",exact:!0}),r.a.createElement(u.b,{exact:!0,path:"/home",component:s}),r.a.createElement(u.b,{exact:!0,path:"/signin",component:j}),r.a.createElement(u.b,{exact:!0,path:"/signup",component:C}),r.a.createElement(ee,{exact:!0,path:"/event",token:c},r.a.createElement(K,null)),r.a.createElement(ee,{exact:!0,path:"/booking",token:c},r.a.createElement(W,null)))))))};o.a.render(r.a.createElement(ae,null),document.getElementById("root"))},73:function(e,t,a){e.exports=a.p+"static/media/event.8762902f.png"},89:function(e,t,a){e.exports=a(121)},94:function(e,t,a){},95:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.ee4a4051.chunk.js.map